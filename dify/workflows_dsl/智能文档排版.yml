app:
  description: AIæ™ºèƒ½æ–‡æ¡£æ’ç‰ˆ â€” æ”¯æŒç²—ç•¥æŒ‡ä»¤ï¼ˆå¦‚"è¿™æ˜¯é€šçŸ¥"ï¼‰ã€ç²¾ç¡®æŒ‡ä»¤ï¼ˆå¦‚"æ ‡é¢˜çº¢è‰²äºŒå·"ï¼‰å’Œæ··åˆæŒ‡ä»¤ã€‚æ”¯æŒå…¨é‡æ’ç‰ˆå’Œå¢é‡å¾®è°ƒï¼Œè¾“å‡ºå¸¦å­—ä½“å­—å·é¢œè‰²ç­‰å®Œæ•´æ ¼å¼å±æ€§çš„ç»“æ„åŒ– JSON
  icon: ğŸ“
  icon_background: "#E0E7FF"
  mode: advanced-chat
  name: æ™ºèƒ½æ–‡æ¡£æ’ç‰ˆ
  use_icon_as_answer_icon: false
dependencies:
  - current_identifier: null
    type: marketplace
    value:
      marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.28@ad074894f4aac6840ef8fb68dbfcf51d13c7800450757a8d99bacbefd245a6ab
    version: null
kind: app
version: 0.6.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
        - .TXT
        - .MD
        - .MARKDOWN
        - .PDF
        - .DOCX
        - .DOC
        - .XLSX
        - .XLS
        - .CSV
        - .HTML
        - .JSON
        - .XML
      allowed_file_types:
        - document
      allowed_file_upload_methods:
        - remote_url
        - local_file
      enabled: true
      fileUploadConfig:
        file_size_limit: 50
        file_upload_limit: 10
      number_limits: 3
    opening_statement: æ‚¨å¥½ï¼æˆ‘æ˜¯æ™ºèƒ½æ–‡æ¡£æ’ç‰ˆåŠ©æ‰‹ã€‚è¯·ä¸Šä¼ æ–‡æ¡£å¹¶æè¿°æ‚¨çš„æ’ç‰ˆéœ€æ±‚ï¼Œå¯ä»¥è¯´å¾—ç²—ä¸€äº›ï¼ˆå¦‚"è¿™æ˜¯ä¸€ä»½é€šçŸ¥ï¼Œè¯·æŒ‰å…¬æ–‡æ ‡å‡†æ’ç‰ˆ"ï¼‰æˆ–ç»†ä¸€äº›ï¼ˆå¦‚"æ ‡é¢˜äºŒå·æ–¹æ­£å°æ ‡å®‹çº¢è‰²å±…ä¸­"ï¼‰ï¼Œä¹Ÿå¯ä»¥ç²—ç»†ç»“åˆã€‚
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
      - è¿™æ˜¯ä¸€ä»½é€šçŸ¥ï¼Œè¯·æŒ‰å…¬æ–‡æ ‡å‡†æ’ç‰ˆ
      - æŒ‰å­¦æœ¯è®ºæ–‡æ ¼å¼é‡æ–°æ’ç‰ˆ
      - è¯·è¯†åˆ«æ–‡æ¡£ç»“æ„å¹¶æ ‡å‡†åŒ–æ’ç‰ˆ
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ""
      voice: ""
  graph:
    edges:
      - data:
          sourceType: start
          targetType: document-extractor
        id: start-document-extractor
        source: start
        sourceHandle: source
        target: document-extractor
        targetHandle: target
        type: custom
      - data:
          sourceType: document-extractor
          targetType: llm
        id: document-extractor-llm
        source: document-extractor
        sourceHandle: source
        target: llm
        targetHandle: target
        type: custom
      - data:
          sourceType: llm
          targetType: answer
        id: llm-answer
        source: llm
        sourceHandle: source
        target: answer
        targetHandle: target
        type: custom
    nodes:
      - data:
          selected: false
          title: ç”¨æˆ·è¾“å…¥
          type: start
          variables: []
        height: 73
        id: start
        position:
          x: 78
          y: 282
        positionAbsolute:
          x: 78
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242

      - data:
          is_array_file: true
          selected: false
          title: æ–‡æ¡£æå–å™¨
          type: document-extractor
          variable_selector:
            - sys
            - files
        height: 88
        id: document-extractor
        position:
          x: 378
          y: 282
        positionAbsolute:
          x: 378
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242

      - data:
          context:
            enabled: true
            variable_selector:
              - document-extractor
              - text
          memory:
            query_prompt_template: "{{#sys.query#}}"
            role_prefix:
              assistant: ""
              user: ""
            window:
              enabled: true
              size: 2
          model:
            completion_params:
              temperature: 0.2
              response_format: json_object
            mode: chat
            name: qwen-plus
            provider: langgenius/tongyi/tongyi
          prompt_template:
            - id: a1b2c3d4-e5f6-7890-abcd-ef1234567890
              role: system
              text: |-
                # è§’è‰²
                ä½ æ˜¯æ™ºèƒ½æ–‡æ¡£æ’ç‰ˆå¼•æ“ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·æŒ‡ä»¤ï¼Œå¯¹æ–‡æ¡£æ–‡æœ¬è¿›è¡Œç»“æ„è¯†åˆ«ï¼Œä¸ºæ¯ä¸ªæ®µè½è¾“å‡º textï¼ˆçº¯æ–‡æœ¬ï¼‰å’Œ style_typeï¼ˆæ ·å¼ç±»å‹ï¼‰ã€‚
                åç«¯ä¼šæ ¹æ® style_type è‡ªåŠ¨å¥—ç”¨é¢„è®¾æ¨¡æ¿çš„å­—ä½“ã€å­—å·ã€é¢œè‰²ç­‰å±æ€§ï¼Œä½ ä¸éœ€è¦è¾“å‡ºè¿™äº›æ ¼å¼å­—æ®µã€‚
                ä½ èƒ½ç†è§£ç²—ç•¥æŒ‡ä»¤ï¼ˆå¦‚"è¿™æ˜¯ä¸€ä»½é€šçŸ¥"ï¼‰ã€ç²¾ç¡®æŒ‡ä»¤ï¼ˆå¦‚"æ ‡é¢˜ç”¨çº¢è‰²äºŒå·å±…ä¸­"ï¼‰ã€ä»¥åŠæ··åˆæŒ‡ä»¤ã€‚

                # Markdown æ¸…æ´—è§„åˆ™ï¼ˆâš ï¸ æœ€é«˜ä¼˜å…ˆçº§ï¼‰
                è¾“å…¥æ–‡æœ¬å¯èƒ½åŒ…å« Markdown æ ¼å¼ç¬¦å·ï¼Œè¾“å‡º text æ—¶**å¿…é¡»å»æ‰æ‰€æœ‰æ ¼å¼ç¬¦å·**ï¼Œåªä¿ç•™çº¯æ–‡æœ¬ã€‚
                åŒæ—¶åˆ©ç”¨è¿™äº›ç¬¦å·è¾…åŠ©åˆ¤æ–­ style_typeï¼š
                - `# æ ‡é¢˜` â†’ text="æ ‡é¢˜", style_type="title"
                - `## ä¸€çº§æ ‡é¢˜` â†’ text="ä¸€çº§æ ‡é¢˜", style_type="heading1"
                - `### äºŒçº§æ ‡é¢˜` â†’ text="äºŒçº§æ ‡é¢˜", style_type="heading2"
                - `**åŠ ç²—æ–‡æœ¬**` â†’ text="åŠ ç²—æ–‡æœ¬"ï¼ˆå»æ‰ **ï¼‰
                - `*æ–œä½“*` â†’ text="æ–œä½“"ï¼ˆå»æ‰ *ï¼‰
                - `> å¼•ç”¨å†…å®¹` â†’ text="å¼•ç”¨å†…å®¹"ï¼ˆå»æ‰ >ï¼‰
                - `- åˆ—è¡¨é¡¹` / `* åˆ—è¡¨é¡¹` â†’ text="åˆ—è¡¨é¡¹"ï¼ˆå»æ‰ - æˆ– *ï¼‰
                - `` `ä»£ç ` `` â†’ text="ä»£ç "ï¼ˆå»æ‰åå¼•å·ï¼‰
                - `[é“¾æ¥æ–‡æœ¬](url)` â†’ text="é“¾æ¥æ–‡æœ¬"ï¼ˆå»æ‰é“¾æ¥è¯­æ³•ï¼‰
                - `---` / `***` / `___`ï¼ˆæ°´å¹³çº¿ï¼‰â†’ ç›´æ¥åˆ é™¤ï¼Œä¸ç”Ÿæˆæ®µè½

                # æ„å›¾è¯†åˆ«è§„åˆ™

                ## ç²—ç•¥æŒ‡ä»¤ â†’ å¥—ç”¨é¢„è®¾æ¨¡æ¿
                å½“ç”¨æˆ·åªè¯´æ–‡æ¡£ç±»å‹è€Œæœªç»™å…·ä½“æ ¼å¼æ—¶ï¼Œå¥—ç”¨å¯¹åº”é¢„è®¾ï¼š
                - "é€šçŸ¥""æŠ¥å‘Š""è¯·ç¤º""å‡½""çºªè¦""å…¬æ–‡""çº¢å¤´æ–‡ä»¶""GB/T 9704" â†’ å…¬æ–‡æ ‡å‡†é¢„è®¾
                - "è®ºæ–‡""å­¦æœ¯""æœŸåˆŠ""æ¯•ä¸šè®ºæ–‡" â†’ å­¦æœ¯è®ºæ–‡é¢„è®¾
                - "æ³•å¾‹""åˆ¤å†³""è£å®š""èµ·è¯‰" â†’ æ³•å¾‹æ–‡ä¹¦é¢„è®¾
                - "æ–¹æ¡ˆ""è®¡åˆ’""ç­–åˆ’""æŠ€æœ¯æ–‡æ¡£" â†’ å…¬æ–‡æ ‡å‡†é¢„è®¾ï¼ˆé€šç”¨ï¼‰
                - æ— æ˜ç¡®ç±»å‹æ—¶ â†’ é»˜è®¤å…¬æ–‡æ ‡å‡†é¢„è®¾

                ## ç²¾ç¡®æŒ‡ä»¤ â†’ é™„åŠ æ ¼å¼å±æ€§
                å½“ç”¨æˆ·æŒ‡å®šäº†å…·ä½“å­—ä½“ã€å­—å·ã€é¢œè‰²ã€å¯¹é½ç­‰æ—¶ï¼Œä»…å¯¹ç›¸å…³æ®µè½é¢å¤–è¾“å‡ºå¯¹åº”å±æ€§ã€‚
                ç¤ºä¾‹ï¼š"æ ‡é¢˜ç”¨ä¸‰å·å¾®è½¯é›…é»‘" â†’ æ ‡é¢˜æ®µé¢å¤–è¾“å‡º font_size="ä¸‰å·", font_family="å¾®è½¯é›…é»‘"ã€‚
                ç¤ºä¾‹ï¼š"æ ‡é¢˜ç”¨çº¢è‰²" â†’ æ ‡é¢˜æ®µé¢å¤–è¾“å‡º color="#CC0000"ã€‚

                ## æ··åˆæŒ‡ä»¤ â†’ é¢„è®¾ + è¦†ç›–
                å…ˆç”±åç«¯å¥—ç”¨é¢„è®¾ï¼Œä½ åªè¾“å‡ºç”¨æˆ·æ˜ç¡®è¦æ±‚çš„è¦†ç›–å±æ€§ã€‚

                ## å¾®è°ƒæŒ‡ä»¤ â†’ ä»…ä¿®æ”¹æŒ‡å®šéƒ¨åˆ†
                å½“ç”¨æˆ·åªè¦æ±‚è°ƒæ•´æŸäº›æ®µè½æˆ–æŸä¸ªå±æ€§æ—¶ï¼Œåªä¿®æ”¹ç›¸å…³éƒ¨åˆ†ã€‚
                ç¤ºä¾‹ï¼š"æŠŠæ‰€æœ‰æ ‡é¢˜åŠ ç²—" â†’ æ‰¾å‡º heading ç±»å‹æ®µè½ï¼Œé¢å¤–è¾“å‡º bold=trueã€‚
                ç¤ºä¾‹ï¼š"ç¬¬5æ®µå­—ä½“æ”¹ä¸ºå®‹ä½“" â†’ ä»…è¾“å‡º _index=5 çš„æ®µè½å¹¶é™„å¸¦ font_family="å®‹ä½“"ã€‚

                # ç»“æ„è¯†åˆ«è§„åˆ™

                æ ¹æ®æ–‡æœ¬å†…å®¹è‡ªåŠ¨è¯†åˆ«æ¯æ®µçš„ style_typeï¼š
                - titleï¼šæ–‡æ¡£æ ‡é¢˜è¡Œï¼ˆå¦‚"å…³äºXXXçš„é€šçŸ¥/æŠ¥å‘Š/è¯·ç¤º"ï¼‰
                - recipientï¼šä¸»é€æœºå…³è¡Œï¼ˆé¡¶æ ¼ï¼Œä»¥"ï¼š"ç»“å°¾ï¼‰
                - heading1ï¼šä»¥"ä¸€ã€""äºŒã€"ç­‰æ±‰å­—ç¼–å·å¼€å¤´
                - heading2ï¼šä»¥"ï¼ˆä¸€ï¼‰""ï¼ˆäºŒï¼‰"ç­‰ç¼–å·å¼€å¤´
                - heading3ï¼šä»¥"1.""2."ç­‰æ•°å­—ç¼–å·å¼€å¤´
                - heading4ï¼šä»¥"(1)""(2)"ç­‰å°æ‹¬å·ç¼–å·å¼€å¤´
                - bodyï¼šæ™®é€šæ­£æ–‡æ®µè½
                - closingï¼šç»“æŸè¯­ï¼ˆ"ç‰¹æ­¤é€šçŸ¥ã€‚""ä»¥ä¸ŠæŠ¥å‘Šï¼Œè¯·å®¡è®®ã€‚"ç­‰ï¼‰
                - signatureï¼šæ–‡æœ«å‘æ–‡æœºå…³ç½²å
                - dateï¼šæ–‡æœ«æ—¥æœŸè¡Œ
                - attachmentï¼šä»¥"é™„ä»¶"æˆ–"é™„ï¼š"å¼€å¤´çš„è¡Œ

                # âš ï¸ ä¸¥æ ¼å±æ€§çº¦æŸï¼ˆä»…åœ¨éœ€è¦è¾“å‡ºæ ¼å¼å±æ€§æ—¶é€‚ç”¨ï¼‰

                ## style_type åªå…è®¸ä»¥ä¸‹å€¼ï¼š
                title, recipient, heading1, heading2, heading3, heading4, body, closing, signature, date, attachment

                ## font_size åªå…è®¸ä¸­æ–‡å­—å·ï¼šåˆå·ã€å°åˆã€ä¸€å·ã€å°ä¸€ã€äºŒå·ã€å°äºŒã€ä¸‰å·ã€å°ä¸‰ã€å››å·ã€å°å››ã€äº”å·ã€å°äº”
                ## font_family åªå…è®¸ï¼šæ–¹æ­£å°æ ‡å®‹ç®€ä½“ã€é»‘ä½“ã€æ¥·ä½“_GB2312ã€ä»¿å®‹_GB2312ã€å®‹ä½“ã€å¾®è½¯é›…é»‘
                ## color åªå…è®¸ï¼š#000000ã€#CC0000ã€#333333ã€#666666ã€#0033CCã€#006600ã€#800080
                ## alignment åªå…è®¸ï¼šleftã€centerã€rightã€justify
                ## bold/italic å¿…é¡»æ˜¯å¸ƒå°”å€¼ true æˆ– false
                ## indent å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¦‚ "2em" æˆ– "0"
                ## line_height å­—ç¬¦ä¸²æ ¼å¼çš„å€æ•°ï¼Œå¦‚ "2" æˆ– "1.5"
                ## red_line å¸ƒå°”å€¼ï¼štitle æ®µè½åœ¨å…¬æ–‡é¢„è®¾ä¸‹é»˜è®¤ trueï¼Œå…¶ä»–ä¸º false

                # æ ¸å¿ƒè§„åˆ™
                1. **å»é™¤æ ¼å¼ç¬¦å·**ï¼šè¾“å‡ºçš„ text å¿…é¡»æ˜¯çº¯æ–‡æœ¬ï¼Œä¸å¾—åŒ…å« #ã€*ã€>ã€- ç­‰ Markdown ç¬¦å·
                2. **ä¿æŒè¯­ä¹‰å†…å®¹**ï¼šä¸ä¿®æ”¹åŸæ–‡çš„è¯­ä¹‰å†…å®¹ï¼Œä½†è¦æ¸…æ´—æ ¼å¼ç¬¦å·
                3. **æ®µè½æ‹†åˆ†**ï¼šå¦‚æœä¸€è¡Œæ··åˆäº†æ ‡é¢˜å’Œæ­£æ–‡ï¼Œå¿…é¡»æ‹†åˆ†ä¸ºä¸¤ä¸ªæ®µè½
                4. **ä¸¥æ ¼ JSON**ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ `{`ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ `}`ï¼Œä¸è¦ç”¨ä»£ç å—åŒ…è£¹
                5. **ç²¾ç®€è¾“å‡º**ï¼šå…¨é‡æ¨¡å¼åªè¾“å‡º text + style_typeï¼Œåç«¯è‡ªåŠ¨è¡¥å…¨æ ¼å¼å±æ€§ã€‚ä»…åœ¨ç”¨æˆ·æ˜ç¡®æŒ‡å®šäº†æŸä¸ªæ ¼å¼å±æ€§æ—¶æ‰é¢å¤–è¾“å‡ºè¯¥å±æ€§

                # å¢é‡ä¿®æ”¹æ¨¡å¼ï¼ˆå¾®è°ƒ / å±€éƒ¨ä¿®æ”¹ï¼‰
                å½“ç”¨æˆ·è¾“å…¥åŒ…å«å¸¦ç´¢å¼•çš„æ®µè½åˆ—è¡¨ï¼ˆå¦‚ `[0] (title, äºŒå·, ...) æ–‡æ¡£æ ‡é¢˜`ï¼‰æ—¶ï¼Œè¡¨ç¤ºå¢é‡ä¿®æ”¹è¯·æ±‚ï¼š
                - **ä»…è¾“å‡ºéœ€è¦ä¿®æ”¹çš„æ®µè½**ï¼Œæœªä¿®æ”¹çš„ä¸è¾“å‡º
                - æ¯ä¸ªè¾“å‡ºæ®µè½å¿…é¡»åŒ…å« `_index` å­—æ®µï¼ˆå¯¹åº” [N] åºå·ï¼‰
                - å¢é‡æ¨¡å¼ä¸‹æ¯ä¸ªæ®µè½éœ€è¾“å‡ºå®Œæ•´ 11 ä¸ªå±æ€§ + _index
                - æ— éœ€ä¿®æ”¹æ—¶è¾“å‡º `{"paragraphs": []}`
                - ä¸å¾—æ“…è‡ªä¿®æ”¹ç”¨æˆ·æœªè¦æ±‚ä¿®æ”¹çš„å±æ€§

                # è¾“å‡ºæ ¼å¼

                ## å…¨é‡æ¨¡å¼ï¼ˆé¦–æ¬¡æ’ç‰ˆï¼‰â€” åªéœ€ text + style_type
                {
                  "paragraphs": [
                    {"text": "å…³äºXXXçš„é€šçŸ¥", "style_type": "title"},
                    {"text": "å„ç›¸å…³å•ä½ï¼š", "style_type": "recipient"},
                    {"text": "ä¸ºæ·±å…¥è´¯å½»è½å®...", "style_type": "body"},
                    {"text": "ä¸€ã€æ€»ä½“è¦æ±‚", "style_type": "heading1"},
                    {"text": "åšæŒä»¥ä¹ è¿‘å¹³...", "style_type": "body"},
                    {"text": "ç‰¹æ­¤é€šçŸ¥ã€‚", "style_type": "closing"},
                    {"text": "XXå•ä½", "style_type": "signature"},
                    {"text": "2026å¹´XæœˆXæ—¥", "style_type": "date"}
                  ]
                }

                å¦‚æœç”¨æˆ·æœ‰ç‰¹æ®Šæ ¼å¼è¦æ±‚ï¼Œä»…å¯¹ç›¸å…³æ®µè½é™„åŠ å±æ€§ï¼š
                {"text": "å…³äºXXXçš„é€šçŸ¥", "style_type": "title", "color": "#CC0000"}

                ## å¢é‡æ¨¡å¼ï¼ˆä»…è¾“å‡ºè¢«ä¿®æ”¹çš„æ®µè½ï¼Œéœ€å®Œæ•´å±æ€§ï¼‰
                {
                  "paragraphs": [
                    {
                      "_index": 0,
                      "text": "æ ‡é¢˜æ–‡æœ¬ä¸å˜",
                      "style_type": "title",
                      "font_size": "äºŒå·",
                      "font_family": "æ–¹æ­£å°æ ‡å®‹ç®€ä½“",
                      "bold": false,
                      "italic": false,
                      "color": "#CC0000",
                      "indent": "0",
                      "alignment": "center",
                      "line_height": "2",
                      "red_line": true
                    }
                  ]
                }

                {{#context#}}
            - id: b2c3d4e5-f6a7-8901-bcde-f12345678901
              role: user
              text: "{{#sys.query#}}"
          selected: false
          title: AIæ’ç‰ˆå¼•æ“
          type: llm
          vision:
            enabled: false
        height: 88
        id: llm
        position:
          x: 678
          y: 282
        positionAbsolute:
          x: 678
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242

      - data:
          answer: "{{#llm.text#}}"
          selected: false
          title: ç›´æ¥å›å¤
          type: answer
          variables: []
        height: 103
        id: answer
        position:
          x: 978
          y: 282
        positionAbsolute:
          x: 978
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
    viewport:
      x: 100
      y: 50
      zoom: 0.85
  rag_pipeline_variables: []
