app:
  description: å…¬æ–‡å®¡æŸ¥ä¸ä¼˜åŒ–ï¼ˆåˆå¹¶ç‰ˆï¼‰â€” æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œè‡ªåŠ¨æå–æ–‡æ¡£å†…å®¹ï¼Œä¸€æ¬¡æ€§å®Œæˆé”™åˆ«å­—/è¯­æ³•/æ ‡ç‚¹/æªè¾/æ•æ„Ÿè¯/é€»è¾‘ç­‰å…¨é¢å®¡æŸ¥ä¸ä¼˜åŒ–å»ºè®®ï¼Œç»“æ„åŒ– JSON è¾“å‡º
  icon: ğŸ”
  icon_background: "#FEF3C7"
  mode: advanced-chat
  name: æ™ºèƒ½å…¬æ–‡å®¡æŸ¥ä¼˜åŒ–
  use_icon_as_answer_icon: false
dependencies:
  - current_identifier: null
    type: marketplace
    value:
      marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.28@ad074894f4aac6840ef8fb68dbfcf51d13c7800450757a8d99bacbefd245a6ab
    version: null
kind: app
version: 0.6.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
        - .TXT
        - .MD
        - .MARKDOWN
        - .PDF
        - .DOCX
        - .DOC
        - .XLSX
        - .XLS
        - .CSV
        - .HTML
        - .JSON
        - .XML
      allowed_file_types:
        - document
      allowed_file_upload_methods:
        - remote_url
        - local_file
      enabled: true
      fileUploadConfig:
        file_size_limit: 50
        file_upload_limit: 10
      number_limits: 3
    opening_statement: ""
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ""
      voice: ""
  graph:
    edges:
      - data:
          sourceType: start
          targetType: document-extractor
        id: start-document-extractor
        source: start
        sourceHandle: source
        target: document-extractor
        targetHandle: target
        type: custom
      - data:
          sourceType: document-extractor
          targetType: llm
        id: document-extractor-llm
        source: document-extractor
        sourceHandle: source
        target: llm
        targetHandle: target
        type: custom
      - data:
          sourceType: llm
          targetType: answer
        id: llm-answer
        source: llm
        sourceHandle: source
        target: answer
        targetHandle: target
        type: custom
    nodes:
      - data:
          selected: false
          title: ç”¨æˆ·è¾“å…¥
          type: start
          variables: []
        height: 73
        id: start
        position:
          x: 80
          y: 282
        positionAbsolute:
          x: 80
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          is_array_file: true
          selected: false
          title: æ–‡æ¡£æå–å™¨
          type: document-extractor
          variable_selector:
            - sys
            - files
        height: 73
        id: document-extractor
        position:
          x: 230
          y: 420
        positionAbsolute:
          x: 230
          y: 420
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          context:
            enabled: true
            variable_selector:
              - document-extractor
              - text
          memory:
            query_prompt_template: "{{#sys.query#}}"
            role_prefix:
              assistant: ""
              user: ""
            window:
              enabled: false
              size: 10
          model:
            completion_params:
              temperature: 0.2
              response_format: json_object
            mode: chat
            name: qwen-plus
            provider: langgenius/tongyi/tongyi
          prompt_template:
            - id: c3a4d5e6-f7b8-9012-cdef-234567890abc
              role: system
              text: |-
                # è§’è‰²å®šä¹‰
                ä½ æ˜¯ä¸€åèµ„æ·±å…¬æ–‡å®¡æŸ¥ä¸ä¼˜åŒ–ä¸“å®¶ï¼Œè´Ÿè´£å¯¹å…¬æ–‡è¿›è¡Œå…¨é¢å®¡æŸ¥å¹¶æå‡ºå…·ä½“çš„ä¿®æ”¹å»ºè®®ã€‚
                å®¡æŸ¥ç»“æœå°†ç”¨äºç³»ç»Ÿçš„ Copilot å¼é€æ¡å˜æ›´å®¡æŸ¥åŠŸèƒ½ï¼Œå› æ­¤ original å­—æ®µå¿…é¡»ç²¾å‡†åŒ¹é…åŸæ–‡ã€‚

                # è¾“å…¥è¯´æ˜
                ç”¨æˆ·å¯èƒ½æä¾›ä¸¤ç§æ ¼å¼çš„å…¬æ–‡å†…å®¹ï¼š
                1. **çº¯æ–‡æœ¬æ ¼å¼**ï¼šç›´æ¥çš„å…¬æ–‡æ–‡æœ¬
                2. **ç»“æ„åŒ– JSON æ ¼å¼**ï¼šåŒ…å« paragraphs æ•°ç»„ï¼Œæ¯ä¸ªæ®µè½æœ‰ textã€style_typeã€font_size ç­‰æ ¼å¼å±æ€§

                å¦‚æœè¾“å…¥æ˜¯ç»“æ„åŒ– JSON æ ¼å¼ï¼š
                - è¯·å®¡æŸ¥æ¯ä¸ªæ®µè½çš„ **text å­—æ®µ**ä¸­çš„æ–‡å­—å†…å®¹
                - original å­—æ®µå¿…é¡»æ˜¯æ®µè½ text ä¸­**ç²¾ç¡®å­˜åœ¨çš„æ–‡æœ¬ç‰‡æ®µ**ï¼ˆç”¨äºå‰ç«¯è‡ªåŠ¨å®šä½å’Œæ›¿æ¢ï¼‰
                - suggestion å­—æ®µæ˜¯å»ºè®®æ›¿æ¢ä¸ºçš„æ–‡æœ¬
                - context å­—æ®µå¼•ç”¨æ®µè½æ–‡æœ¬çš„ä¸Šä¸‹æ–‡ï¼ˆé JSON å±æ€§ï¼‰
                - ä¸è¦å°† JSON ç»“æ„æœ¬èº«ï¼ˆå¦‚å±æ€§åã€style_type å€¼ï¼‰ä½œä¸ºå®¡æŸ¥å¯¹è±¡
                - ä¸è¦å®¡æŸ¥æ ¼å¼å±æ€§ï¼ˆfont_sizeã€alignment ç­‰å±äºæ’ç‰ˆé˜¶æ®µçš„èŒè´£ï¼‰

                # å®¡æŸ¥ç»´åº¦

                ## 1. é”™åˆ«å­—ä¸æ‹¼å†™ï¼ˆtypoï¼‰
                - é€å­—æ£€æŸ¥æ±‰å­—æ˜¯å¦æ­£ç¡®ï¼Œé‡ç‚¹è¯†åˆ«åŒéŸ³å­—ï¼ˆå¦‚"åš/ä½œ""çš„/åœ°/å¾—""ä»¥/å·²"ï¼‰å’Œå½¢è¿‘å­—é”™ç”¨
                - æ ¸æŸ¥ä¸“æœ‰åè¯æ‹¼å†™ï¼šæœºæ„å…¨ç§°ã€æ³•è§„åç§°ã€åœ°å
                - æ£€æŸ¥æ•°å­—å•ä½ï¼šä¸‡å…ƒ/äº¿å…ƒã€ç™¾åˆ†æ¯”ã€æ—¥æœŸæ ¼å¼

                ## 2. æ ‡ç‚¹ç¬¦å·ï¼ˆpunctuationï¼‰
                - ä¸­æ–‡æ ‡ç‚¹æ˜¯å¦ä½¿ç”¨æ­£ç¡®ï¼ˆå…¨è§’/åŠè§’ã€é¡¿å·/é€—å·/åˆ†å·å±‚çº§ï¼‰
                - ä¹¦åå·/å¼•å·åµŒå¥—æ˜¯å¦è§„èŒƒ
                - å¥å·ã€é€—å·ã€å†’å·ç­‰ä½¿ç”¨æ˜¯å¦æ°å½“

                ## 3. è¯­æ³•ä¸é€»è¾‘ï¼ˆgrammarï¼‰
                - è¯­æ³•ç»“æ„å®Œæ•´æ€§ï¼šä¸»è°“å®¾æ­é…ã€æˆåˆ†æ®‹ç¼ºã€è¯­åºä¸å½“
                - é€»è¾‘è¿è´¯æ€§ï¼šä¸Šä¸‹æ–‡å› æœå…³ç³»ã€é€’è¿›å…³ç³»æ˜¯å¦åˆç†
                - é‡å¤èµ˜è¿°æ£€æµ‹

                ## 4. æªè¾ä¼˜åŒ–ï¼ˆwordingï¼‰
                - å£è¯­åŒ–è¡¨è¿° â†’ æ›¿æ¢ä¸ºæ ‡å‡†å…¬æ–‡ç¨‹å¼è¯­è¨€
                - ç”¨è¯ä¸å¤Ÿå‡†ç¡®æˆ–åŠ›åº¦ä¸å¤Ÿä¹‹å¤„ â†’ æä¾›æ›´è§„èŒƒçš„æ›¿ä»£
                - è¡¨è¿°å†—ä½™ â†’ ç²¾ç®€ä¼˜åŒ–

                ## 5. æ•æ„Ÿè¯ä¸åˆè§„æ€§ï¼ˆsensitiveï¼‰
                - æ”¿æ²»æ•æ„Ÿè¡¨è¿°æ£€æµ‹
                - ä¸ç°è¡Œæ”¿ç­–æ³•è§„ç›¸å†²çªçš„è¡¨è¿°
                - æ¶‰å¯†é£é™©ç”¨è¯­è¯†åˆ«

                ## 6. ç»“æ„å»ºè®®ï¼ˆstructureï¼‰
                - æ ‡é¢˜å±‚çº§ç¼–å·æ˜¯å¦è§„èŒƒï¼ˆ"ä¸€ã€""ï¼ˆä¸€ï¼‰""1.""(1)"å››çº§ï¼‰
                - æ®µè½é€»è¾‘é¡ºåºæ˜¯å¦åˆç†
                - æ˜¯å¦ç¼ºå°‘å¿…è¦çš„å…¬æ–‡è¦ç´ ï¼ˆæ ‡é¢˜ã€ä¸»é€æœºå…³ã€ç»“æŸè¯­ã€è½æ¬¾ç­‰ï¼‰

                # å®¡æŸ¥åŸåˆ™
                - **æ±‚çœŸ**ï¼šåªæŠ¥å‘Šç¡®å®å­˜åœ¨çš„é—®é¢˜ï¼Œä¸¥ç¦ç¼–é€ ä¸å­˜åœ¨çš„é”™è¯¯
                - **ç²¾å‡†å®šä½**ï¼šoriginal å¿…é¡»æ˜¯åŸæ–‡ä¸­å¯è¢«ç²¾ç¡®æŸ¥æ‰¾åˆ°çš„æ–‡æœ¬ç‰‡æ®µï¼ˆå‰ç«¯ä¼šç”¨ String.includes() å®šä½ï¼‰ï¼Œä¸è¦æˆªæ–­æˆ–æ”¹å†™
                - **å¯æ“ä½œ**ï¼šæ¯ä¸ªå»ºè®®å¿…é¡»å…·ä½“åˆ°ä¿®æ”¹åçš„æ–‡å­—
                - **åˆ†ä¼˜å…ˆçº§**ï¼šerrorï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰ã€warningï¼ˆå»ºè®®ä¿®æ”¹ï¼‰ã€infoï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

                # è¾“å‡ºæ ¼å¼ï¼ˆä¸¥æ ¼ JSONï¼Œç¦æ­¢ Markdown ä»£ç å—ï¼‰

                ä½ çš„è¾“å‡ºå¿…é¡»æ˜¯ä¸”ä»…æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ `{`ã€‚

                ```json-schema
                {
                  "suggestions": [
                    {
                      "category": "typo | punctuation | grammar | wording | sensitive | structure",
                      "severity": "error | warning | info",
                      "original": "åŸæ–‡ä¸­æœ‰é—®é¢˜çš„ç²¾ç¡®æ–‡æœ¬ç‰‡æ®µï¼ˆå¿…é¡»å¯åœ¨åŸæ–‡ä¸­é€šè¿‡å­—ç¬¦ä¸²åŒ¹é…æ‰¾åˆ°ï¼‰",
                      "suggestion": "å»ºè®®ä¿®æ”¹ä¸ºçš„æ–‡æœ¬",
                      "reason": "ä¿®æ”¹ç†ç”±ï¼ˆç®€æ´æ˜ç¡®ï¼‰",
                      "context": "â€¦åŒ…å«é—®é¢˜æ–‡æœ¬çš„ä¸Šä¸‹æ–‡ï¼ˆå‰å10~20å­—ï¼‰â€¦"
                    }
                  ],
                  "summary": "æ•´ä½“å®¡æŸ¥æ€»ç»“ï¼šå…±å‘ç° N å¤„é—®é¢˜ï¼ˆé”™åˆ«å­— X å¤„ã€æ ‡ç‚¹ X å¤„ã€è¯­æ³• X å¤„ã€æªè¾ X å¤„ã€æ•æ„Ÿè¯ X å¤„ã€ç»“æ„ X å¤„ï¼‰ï¼Œä¸»è¦é£é™©ç‚¹ä¸ºâ€¦â€¦"
                }
                ```

                # æ³¨æ„äº‹é¡¹
                - è‹¥æŸç±»é—®é¢˜æœªå‘ç°ï¼Œä¸éœ€è¦ç”Ÿæˆå¯¹åº”æ¡ç›®
                - æ‰€æœ‰é—®é¢˜éƒ½æ²¡æœ‰æ—¶ï¼Œsuggestions ä¸ºç©ºæ•°ç»„ `[]`ï¼Œsummary å†™"å®¡æŸ¥é€šè¿‡ï¼Œæœªå‘ç°æ˜æ˜¾é—®é¢˜"
                - original å­—æ®µå¿…é¡»æ˜¯åŸæ–‡ä¸­å­˜åœ¨çš„**ç²¾ç¡®æ–‡æœ¬**ï¼Œæ–¹ä¾¿å‰ç«¯åšæ–‡æœ¬æ›¿æ¢
                - æ¯ä¸ª suggestion çš„ original å’Œ suggestion ä¸èƒ½ç›¸åŒ
                - æŒ‰ severity ä¼˜å…ˆçº§æ’åºï¼šerror åœ¨å‰ï¼Œwarning æ¬¡ä¹‹ï¼Œinfo æœ€å

                # ä¸Šä¼ æ–‡æ¡£å†…å®¹ï¼ˆç”±æ–‡æ¡£æå–å™¨è‡ªåŠ¨è§£æï¼‰
                {{#context#}}
          selected: true
          title: LLM
          type: llm
          vision:
            enabled: false
        height: 88
        id: llm
        position:
          x: 380
          y: 282
        positionAbsolute:
          x: 380
          y: 282
        selected: true
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
      - data:
          answer: "{{#llm.text#}}"
          selected: false
          title: ç›´æ¥å›å¤
          type: answer
          variables: []
        height: 103
        id: answer
        position:
          x: 681
          y: 282
        positionAbsolute:
          x: 681
          y: 282
        selected: false
        sourcePosition: right
        targetPosition: left
        type: custom
        width: 242
    viewport:
      x: 132
      y: 7
      zoom: 0.8
  rag_pipeline_variables: []
