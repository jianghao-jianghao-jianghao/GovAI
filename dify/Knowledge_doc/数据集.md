> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 获取知识库列表

> 检索知识库列表，支持分页和过滤选项。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json get /datasets
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets:
    get:
      tags:
        - 数据集
      summary: 获取知识库列表
      description: 检索知识库列表，支持分页和过滤选项。
      operationId: listDatasets
      parameters:
        - name: keyword
          in: query
          description: 按名称过滤数据集的搜索关键词。
          schema:
            type: string
        - name: tag_ids
          in: query
          description: 要过滤的标签 ID 列表。数据集必须具有所有指定的标签。
          schema:
            type: array
            items:
              type: string
          style: form
          explode: false
        - name: page
          in: query
          description: 分页的页码。
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: 每页返回的项目数。
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: include_all
          in: query
          description: 是否包含所有数据集。这仅对工作区所有者有效。
          schema:
            type: boolean
            default: false
      responses:
        "200":
          description: 数据集的分页列表。
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DatasetListResponse"
components:
  schemas:
    DatasetListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Dataset"
        has_more:
          type: boolean
        limit:
          type: integer
        total:
          type: integer
        page:
          type: integer
    Dataset:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        provider:
          type: string
        permission:
          type: string
        data_source_type:
          type: string
          nullable: true
        indexing_technique:
          type: string
          nullable: true
        app_count:
          type: integer
        document_count:
          type: integer
        word_count:
          type: integer
        created_by:
          type: string
          format: uuid
        created_at:
          type: integer
          format: int64
        updated_by:
          type: string
          format: uuid
        updated_at:
          type: integer
          format: int64
        embedding_model:
          type: string
          nullable: true
        embedding_model_provider:
          type: string
          nullable: true
        embedding_available:
          type: boolean
          nullable: true
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 该数据集的摘要自动生成配置。
          nullable: true
    SummaryIndexSetting:
      type: object
      description: 摘要自动生成配置。
      properties:
        enable:
          type: boolean
          description: 是否启用摘要自动生成。
        model_name:
          type: string
          description: 用于生成摘要的模型名称。
        model_provider_name:
          type: string
          description: 摘要模型的提供商。
        summary_prompt:
          type: string
          description: 用于生成摘要的提示词模板。
      required:
        - enable
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```

> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 创建空知识库

> 使用指定配置创建一个新的空知识库（数据集）。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json post /datasets
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets:
    post:
      tags:
        - 数据集
      summary: 创建空知识库
      description: 使用指定配置创建一个新的空知识库（数据集）。
      operationId: createDataset
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDatasetRequest"
      responses:
        "200":
          description: 成功创建数据集。
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Dataset"
        "409":
          $ref: "#/components/responses/DatasetNameDuplicate"
components:
  schemas:
    CreateDatasetRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: 知识库的名称。
        description:
          type: string
          description: 知识库的描述（可选）。
        indexing_technique:
          type: string
          description: 要使用的索引技术。
          enum:
            - high_quality
            - economy
        permission:
          type: string
          description: 知识库的访问权限。
          enum:
            - only_me
            - all_team_members
            - partial_members
        provider:
          type: string
          description: 知识库的提供商。
          enum:
            - vendor
            - external
        external_knowledge_api_id:
          type: string
          description: 外部知识 API 的 ID（如果提供商是 'external'）。
        external_knowledge_id:
          type: string
          description: 外部知识的 ID（如果提供商是 'external'）。
        embedding_model:
          type: string
          description: 嵌入模型的名称。
        embedding_model_provider:
          type: string
          description: 嵌入模型的提供商。
        retrieval_model:
          $ref: "#/components/schemas/RetrievalModel"
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 摘要自动生成配置。
    Dataset:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        provider:
          type: string
        permission:
          type: string
        data_source_type:
          type: string
          nullable: true
        indexing_technique:
          type: string
          nullable: true
        app_count:
          type: integer
        document_count:
          type: integer
        word_count:
          type: integer
        created_by:
          type: string
          format: uuid
        created_at:
          type: integer
          format: int64
        updated_by:
          type: string
          format: uuid
        updated_at:
          type: integer
          format: int64
        embedding_model:
          type: string
          nullable: true
        embedding_model_provider:
          type: string
          nullable: true
        embedding_available:
          type: boolean
          nullable: true
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 该数据集的摘要自动生成配置。
          nullable: true
    RetrievalModel:
      type: object
      properties:
        search_method:
          type: string
          description: 用于检索的搜索方法。
          enum:
            - hybrid_search
            - semantic_search
            - full_text_search
            - keyword_search
        reranking_enable:
          type: boolean
          description: 是否启用重新排序模型以改善搜索结果。
        reranking_mode:
          type: string
          description: 重新排序模式。
          default: reranking_model
          enum:
            - reranking_model
            - weighted_score
        reranking_model:
          type: object
          description: 重新排序模型的配置。
          properties:
            reranking_provider_name:
              type: string
              description: 重新排序模型的提供商。
            reranking_model_name:
              type: string
              description: 重新排序模型的名称。
          nullable: true
        top_k:
          type: integer
          description: 返回的顶部匹配结果数量。
        score_threshold_enabled:
          type: boolean
          description: 是否应用分数阈值来过滤结果。
        score_threshold:
          type: number
          format: float
          description: 结果包含的最低分数。
          nullable: true
        weights:
          type: number
          format: float
          description: 混合搜索模式中语义搜索的权重。
          nullable: true
    SummaryIndexSetting:
      type: object
      description: 摘要自动生成配置。
      properties:
        enable:
          type: boolean
          description: 是否启用摘要自动生成。
        model_name:
          type: string
          description: 用于生成摘要的模型名称。
        model_provider_name:
          type: string
          description: 摘要模型的提供商。
        summary_prompt:
          type: string
          description: 用于生成摘要的提示词模板。
      required:
        - enable
    ErrorResponse:
      type: object
      properties:
        code:
          type: string
          description: 机器可读的错误代码。
        message:
          type: string
          description: 人类可读的错误消息。
        status:
          type: integer
          description: HTTP 状态码。
      example:
        code: no_file_uploaded
        message: 请上传你的文件。
        status: 400
  responses:
    DatasetNameDuplicate:
      description: 数据集名称已存在。
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```

> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 获取知识库详情

> 通过 ID 获取特定知识库的详细信息。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json get /datasets/{dataset_id}
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets/{dataset_id}:
    get:
      tags:
        - 数据集
      summary: 获取知识库详情
      description: 通过 ID 获取特定知识库的详细信息。
      operationId: getDatasetDetail
      parameters:
        - name: dataset_id
          in: path
          required: true
          description: 知识库的唯一标识符。
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: 关于数据集的详细信息。
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DatasetDetail"
components:
  schemas:
    DatasetDetail:
      allOf:
        - $ref: "#/components/schemas/Dataset"
        - type: object
          properties:
            retrieval_model_dict:
              $ref: "#/components/schemas/RetrievalModel"
            tags:
              type: array
              items:
                type: object
            doc_form:
              type: string
              nullable: true
    Dataset:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        provider:
          type: string
        permission:
          type: string
        data_source_type:
          type: string
          nullable: true
        indexing_technique:
          type: string
          nullable: true
        app_count:
          type: integer
        document_count:
          type: integer
        word_count:
          type: integer
        created_by:
          type: string
          format: uuid
        created_at:
          type: integer
          format: int64
        updated_by:
          type: string
          format: uuid
        updated_at:
          type: integer
          format: int64
        embedding_model:
          type: string
          nullable: true
        embedding_model_provider:
          type: string
          nullable: true
        embedding_available:
          type: boolean
          nullable: true
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 该数据集的摘要自动生成配置。
          nullable: true
    RetrievalModel:
      type: object
      properties:
        search_method:
          type: string
          description: 用于检索的搜索方法。
          enum:
            - hybrid_search
            - semantic_search
            - full_text_search
            - keyword_search
        reranking_enable:
          type: boolean
          description: 是否启用重新排序模型以改善搜索结果。
        reranking_mode:
          type: string
          description: 重新排序模式。
          default: reranking_model
          enum:
            - reranking_model
            - weighted_score
        reranking_model:
          type: object
          description: 重新排序模型的配置。
          properties:
            reranking_provider_name:
              type: string
              description: 重新排序模型的提供商。
            reranking_model_name:
              type: string
              description: 重新排序模型的名称。
          nullable: true
        top_k:
          type: integer
          description: 返回的顶部匹配结果数量。
        score_threshold_enabled:
          type: boolean
          description: 是否应用分数阈值来过滤结果。
        score_threshold:
          type: number
          format: float
          description: 结果包含的最低分数。
          nullable: true
        weights:
          type: number
          format: float
          description: 混合搜索模式中语义搜索的权重。
          nullable: true
    SummaryIndexSetting:
      type: object
      description: 摘要自动生成配置。
      properties:
        enable:
          type: boolean
          description: 是否启用摘要自动生成。
        model_name:
          type: string
          description: 用于生成摘要的模型名称。
        model_provider_name:
          type: string
          description: 摘要模型的提供商。
        summary_prompt:
          type: string
          description: 用于生成摘要的提示词模板。
      required:
        - enable
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```

> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 删除知识库

> 删除知识库及其所有相关文档和数据。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json delete /datasets/{dataset_id}
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets/{dataset_id}:
    delete:
      tags:
        - 数据集
      summary: 删除知识库
      description: 删除知识库及其所有相关文档和数据。
      operationId: deleteDataset
      parameters:
        - name: dataset_id
          in: path
          required: true
          description: 要删除的知识库的唯一标识符。
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: 成功删除数据集。
components:
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```

> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 更新知识库

> 更新特定知识库的设置。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json patch /datasets/{dataset_id}
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets/{dataset_id}:
    patch:
      tags:
        - 数据集
      summary: 更新知识库
      description: 更新特定知识库的设置。
      operationId: updateDataset
      parameters:
        - name: dataset_id
          in: path
          required: true
          description: 知识库的唯一标识符。
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDatasetRequest"
      responses:
        "200":
          description: 成功更新数据集详情。
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DatasetDetail"
        "409":
          $ref: "#/components/responses/DatasetNameDuplicate"
components:
  schemas:
    UpdateDatasetRequest:
      type: object
      properties:
        name:
          type: string
          description: 知识库的新名称。
        description:
          type: string
          description: 知识库的新描述。
        indexing_technique:
          type: string
          enum:
            - high_quality
            - economy
        permission:
          type: string
          enum:
            - only_me
            - all_team_members
            - partial_members
        embedding_model_provider:
          type: string
        embedding_model:
          type: string
        retrieval_model:
          $ref: "#/components/schemas/RetrievalModel"
        partial_member_list:
          type: array
          description: "'partial_members' 权限可访问的成员列表。"
          items:
            type: object
            required:
              - user_id
            properties:
              user_id:
                type: string
                description: 成员的用户 ID。
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 摘要自动生成配置。
    DatasetDetail:
      allOf:
        - $ref: "#/components/schemas/Dataset"
        - type: object
          properties:
            retrieval_model_dict:
              $ref: "#/components/schemas/RetrievalModel"
            tags:
              type: array
              items:
                type: object
            doc_form:
              type: string
              nullable: true
    RetrievalModel:
      type: object
      properties:
        search_method:
          type: string
          description: 用于检索的搜索方法。
          enum:
            - hybrid_search
            - semantic_search
            - full_text_search
            - keyword_search
        reranking_enable:
          type: boolean
          description: 是否启用重新排序模型以改善搜索结果。
        reranking_mode:
          type: string
          description: 重新排序模式。
          default: reranking_model
          enum:
            - reranking_model
            - weighted_score
        reranking_model:
          type: object
          description: 重新排序模型的配置。
          properties:
            reranking_provider_name:
              type: string
              description: 重新排序模型的提供商。
            reranking_model_name:
              type: string
              description: 重新排序模型的名称。
          nullable: true
        top_k:
          type: integer
          description: 返回的顶部匹配结果数量。
        score_threshold_enabled:
          type: boolean
          description: 是否应用分数阈值来过滤结果。
        score_threshold:
          type: number
          format: float
          description: 结果包含的最低分数。
          nullable: true
        weights:
          type: number
          format: float
          description: 混合搜索模式中语义搜索的权重。
          nullable: true
    SummaryIndexSetting:
      type: object
      description: 摘要自动生成配置。
      properties:
        enable:
          type: boolean
          description: 是否启用摘要自动生成。
        model_name:
          type: string
          description: 用于生成摘要的模型名称。
        model_provider_name:
          type: string
          description: 摘要模型的提供商。
        summary_prompt:
          type: string
          description: 用于生成摘要的提示词模板。
      required:
        - enable
    Dataset:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
          nullable: true
        provider:
          type: string
        permission:
          type: string
        data_source_type:
          type: string
          nullable: true
        indexing_technique:
          type: string
          nullable: true
        app_count:
          type: integer
        document_count:
          type: integer
        word_count:
          type: integer
        created_by:
          type: string
          format: uuid
        created_at:
          type: integer
          format: int64
        updated_by:
          type: string
          format: uuid
        updated_at:
          type: integer
          format: int64
        embedding_model:
          type: string
          nullable: true
        embedding_model_provider:
          type: string
          nullable: true
        embedding_available:
          type: boolean
          nullable: true
        summary_index_setting:
          $ref: "#/components/schemas/SummaryIndexSetting"
          description: 该数据集的摘要自动生成配置。
          nullable: true
    ErrorResponse:
      type: object
      properties:
        code:
          type: string
          description: 机器可读的错误代码。
        message:
          type: string
          description: 人类可读的错误消息。
        status:
          type: integer
          description: HTTP 状态码。
      example:
        code: no_file_uploaded
        message: 请上传你的文件。
        status: 400
  responses:
    DatasetNameDuplicate:
      description: 数据集名称已存在。
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```

> ## Documentation Index
>
> Fetch the complete documentation index at: https://docs.dify.ai/llms.txt
> Use this file to discover all available pages before exploring further.

# 从知识库检索块 / 测试检索

> 对知识库执行搜索查询以检索最相关的块（段落）。此端点可用于生产检索和测试检索。

## OpenAPI

```yaml zh/api-reference/openapi_knowledge.json post /datasets/{dataset_id}/retrieve
openapi: 3.0.1
info:
  title: 知识库 API
  description: 用于管理知识库（数据集）、文档和段落的 API，包括创建、检索和配置功能。
  version: 1.0.0
servers:
  - url: "{apiBaseUrl}"
    description: 知识库 API 的基础 URL。
    variables:
      apiBaseUrl:
        default: https://api.dify.ai/v1
        description: API 的实际基础 URL
security:
  - ApiKeyAuth: []
tags:
  - name: 数据集
    description: 与管理知识库（数据集）相关的操作。
  - name: 文档
    description: 用于在数据集中创建、更新和管理文档的操作。
  - name: 文档块
    description: 用于管理文档块（段落）的操作。
  - name: 元数据和标签
    description: 用于管理数据集标签和元数据的操作。
  - name: 模型
    description: 用于检索可用模型的操作。
paths:
  /datasets/{dataset_id}/retrieve:
    post:
      tags:
        - 数据集
      summary: 从知识库检索块 / 测试检索
      description: 对知识库执行搜索查询以检索最相关的块（段落）。此端点可用于生产检索和测试检索。
      operationId: retrieveSegments
      parameters:
        - name: dataset_id
          in: path
          required: true
          description: 要检索的知识库 ID。
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RetrieveRequest"
      responses:
        "200":
          description: 与查询匹配的检索段落列表。
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RetrieveResponse"
components:
  schemas:
    RetrieveRequest:
      type: object
      required:
        - query
      properties:
        query:
          type: string
          description: 搜索查询字符串。
        retrieval_model:
          allOf:
            - $ref: "#/components/schemas/RetrievalModel"
            - type: object
              properties:
                metadata_filtering_conditions:
                  type: object
                  description: 基于元数据过滤结果的条件。
                  properties:
                    logical_operator:
                      type: string
                      enum:
                        - and
                        - or
                    conditions:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                            description: 元数据字段的名称。
                          comparison_operator:
                            type: string
                            description: 比较的运算符。
                          value:
                            oneOf:
                              - type: string
                              - type: number
                            nullable: true
                            description: 要比较的值。
    RetrieveResponse:
      type: object
      properties:
        query:
          type: object
          properties:
            content:
              type: string
        records:
          type: array
          items:
            $ref: "#/components/schemas/RetrievedSegment"
    RetrievalModel:
      type: object
      properties:
        search_method:
          type: string
          description: 用于检索的搜索方法。
          enum:
            - hybrid_search
            - semantic_search
            - full_text_search
            - keyword_search
        reranking_enable:
          type: boolean
          description: 是否启用重新排序模型以改善搜索结果。
        reranking_mode:
          type: string
          description: 重新排序模式。
          default: reranking_model
          enum:
            - reranking_model
            - weighted_score
        reranking_model:
          type: object
          description: 重新排序模型的配置。
          properties:
            reranking_provider_name:
              type: string
              description: 重新排序模型的提供商。
            reranking_model_name:
              type: string
              description: 重新排序模型的名称。
          nullable: true
        top_k:
          type: integer
          description: 返回的顶部匹配结果数量。
        score_threshold_enabled:
          type: boolean
          description: 是否应用分数阈值来过滤结果。
        score_threshold:
          type: number
          format: float
          description: 结果包含的最低分数。
          nullable: true
        weights:
          type: number
          format: float
          description: 混合搜索模式中语义搜索的权重。
          nullable: true
    RetrievedSegment:
      type: object
      properties:
        segment:
          allOf:
            - $ref: "#/components/schemas/Segment"
            - type: object
              properties:
                document:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    data_source_type:
                      type: string
                    name:
                      type: string
        score:
          type: number
          format: float
    Segment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        position:
          type: integer
        document_id:
          type: string
          format: uuid
        content:
          type: string
        answer:
          type: string
          nullable: true
        word_count:
          type: integer
        tokens:
          type: integer
        keywords:
          type: array
          items:
            type: string
        index_node_id:
          type: string
        index_node_hash:
          type: string
        hit_count:
          type: integer
        enabled:
          type: boolean
        disabled_at:
          type: integer
          format: int64
          nullable: true
        disabled_by:
          type: string
          format: uuid
          nullable: true
        status:
          type: string
        created_by:
          type: string
          format: uuid
        created_at:
          type: integer
          format: int64
        indexing_at:
          type: integer
          format: int64
        completed_at:
          type: integer
          format: int64
        error:
          type: string
          nullable: true
        stopped_at:
          type: integer
          format: int64
          nullable: true
        summary:
          type: string
          nullable: true
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: >-
        API-Key 鉴权。所有 API 请求都应在 `Authorization` HTTP Header 中包含你的 API-Key，格式为
        `Bearer {API_KEY}`。**强烈建议开发者把 API-Key 放在后端存储，而非分享或者放在客户端存储，以免 API-Key
        泄露，导致财产损失。**
```
