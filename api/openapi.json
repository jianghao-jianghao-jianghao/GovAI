{"openapi":"3.1.0","info":{"title":"GovAI 智政系统 API","version":"1.0.0"},"paths":{"/api/v1/auth/login":{"post":{"tags":["Auth"],"summary":"Login","description":"用户登录","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Auth"],"summary":"Logout","description":"退出登录 — 将 Token 加入黑名单","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/profile":{"get":{"tags":["Auth"],"summary":"Get Profile","description":"获取当前用户信息","operationId":"get_profile_api_v1_auth_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/refresh":{"post":{"tags":["Auth"],"summary":"Refresh Token","description":"刷新 Token","operationId":"refresh_token_api_v1_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/users":{"get":{"tags":["Users"],"summary":"List Users","description":"用户列表（分页+筛选）","operationId":"list_users_api_v1_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","title":"Status"}},{"name":"role_id","in":"query","required":false,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Users"],"summary":"Create User","description":"创建用户","operationId":"create_user_api_v1_users_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/{user_id}":{"get":{"tags":["Users"],"summary":"Get User","description":"获取用户详情","operationId":"get_user_api_v1_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Users"],"summary":"Update User","description":"更新用户","operationId":"update_user_api_v1_users__user_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Users"],"summary":"Delete User","description":"删除用户","operationId":"delete_user_api_v1_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/roles":{"get":{"tags":["Roles"],"summary":"List Roles","description":"角色列表","operationId":"list_roles_api_v1_roles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Roles"],"summary":"Create Role","description":"创建角色","operationId":"create_role_api_v1_roles_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/roles/{role_id}":{"get":{"tags":["Roles"],"summary":"Get Role","description":"获取角色详情","operationId":"get_role_api_v1_roles__role_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Roles"],"summary":"Update Role","description":"更新角色","operationId":"update_role_api_v1_roles__role_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Roles"],"summary":"Delete Role","description":"删除角色","operationId":"delete_role_api_v1_roles__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/logs":{"get":{"tags":["AuditLogs"],"summary":"List Audit Logs","description":"审计日志列表","operationId":"list_audit_logs_api_v1_audit_logs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"user_keyword","in":"query","required":false,"schema":{"type":"string","description":"用户名/姓名模糊搜索","title":"User Keyword"},"description":"用户名/姓名模糊搜索"},{"name":"module","in":"query","required":false,"schema":{"type":"string","description":"按模块过滤","title":"Module"},"description":"按模块过滤"},{"name":"action","in":"query","required":false,"schema":{"type":"string","description":"按动作过滤","title":"Action"},"description":"按动作过滤"},{"name":"start_date","in":"query","required":false,"schema":{"type":"string","description":"日期起始 (YYYY-MM-DD)","title":"Start Date"},"description":"日期起始 (YYYY-MM-DD)"},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","description":"日期截止 (YYYY-MM-DD)","title":"End Date"},"description":"日期截止 (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audit/logs/export":{"post":{"tags":["AuditLogs"],"summary":"Export Audit Logs","description":"导出审计日志为 CSV","operationId":"export_audit_logs_api_v1_audit_logs_export_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_keyword","in":"query","required":false,"schema":{"type":"string","title":"User Keyword"}},{"name":"module","in":"query","required":false,"schema":{"type":"string","title":"Module"}},{"name":"action","in":"query","required":false,"schema":{"type":"string","title":"Action"}},{"name":"start_date","in":"query","required":false,"schema":{"type":"string","title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents":{"get":{"tags":["Documents"],"summary":"List Documents","description":"公文列表","operationId":"list_documents_api_v1_documents_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"query","required":true,"schema":{"type":"string","description":"doc 或 template","title":"Category"},"description":"doc 或 template"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}},{"name":"doc_type","in":"query","required":false,"schema":{"type":"string","title":"Doc Type"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","title":"Status"}},{"name":"security","in":"query","required":false,"schema":{"type":"string","title":"Security"}},{"name":"start_date","in":"query","required":false,"schema":{"type":"string","title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"type":"string","title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Documents"],"summary":"Create Document","description":"创建公文","operationId":"create_document_api_v1_documents_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/import":{"post":{"tags":["Documents"],"summary":"Import Document","description":"导入文档为公文/模板。\n\n使用 MarkItDown 将各类文档（PDF, DOCX, DOC, XLSX, CSV, TXT, MD, PPTX, HTML 等）\n转换为高质量 Markdown，自动保留标题、表格、列表等结构信息。","operationId":"import_document_api_v1_documents_import_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_import_document_api_v1_documents_import_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/documents/export":{"post":{"tags":["Documents"],"summary":"Export Documents","description":"导出公文列表为 CSV 或 XLSX","operationId":"export_documents_api_v1_documents_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentExportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/documents/{doc_id}/source":{"get":{"tags":["Documents"],"summary":"Download Document Source","description":"下载公文的原始上传文件（PDF/DOCX/XLSX 等）。\n\n仅对通过 /import 导入的公文有效。","operationId":"download_document_source_api_v1_documents__doc_id__source_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}/markdown":{"get":{"tags":["Documents"],"summary":"Get Document Markdown","description":"获取公文的 Markdown 文件内容（用于预览/对比）。\n\n返回磁盘上保存的 .md 文件内容。","operationId":"get_document_markdown_api_v1_documents__doc_id__markdown_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}":{"get":{"tags":["Documents"],"summary":"Get Document","description":"公文详情","operationId":"get_document_api_v1_documents__doc_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Documents"],"summary":"Update Document","description":"更新公文","operationId":"update_document_api_v1_documents__doc_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Documents"],"summary":"Delete Document","description":"删除公文","operationId":"delete_document_api_v1_documents__doc_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}/archive":{"post":{"tags":["Documents"],"summary":"Archive Document","description":"归档公文","operationId":"archive_document_api_v1_documents__doc_id__archive_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}/process":{"post":{"tags":["Documents"],"summary":"Process Document","description":"AI 公文处理（起草/检查/优化）","operationId":"process_document_api_v1_documents__doc_id__process_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocProcessRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}/versions":{"get":{"tags":["Documents"],"summary":"List Document Versions","description":"公文版本历史","operationId":"list_document_versions_api_v1_documents__doc_id__versions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/documents/{doc_id}/versions/{version_id}":{"get":{"tags":["Documents"],"summary":"Get Document Version","description":"获取指定版本详情","operationId":"get_document_version_api_v1_documents__doc_id__versions__version_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"doc_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Doc Id"}},{"name":"version_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Version Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates":{"get":{"tags":["DocumentTemplates"],"summary":"List Templates","description":"模板列表","operationId":"list_templates_api_v1_templates_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_type","in":"query","required":false,"schema":{"type":"string","title":"Template Type"}},{"name":"is_active","in":"query","required":false,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["DocumentTemplates"],"summary":"Create Template","description":"创建模板","operationId":"create_template_api_v1_templates_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}":{"get":{"tags":["DocumentTemplates"],"summary":"Get Template","description":"获取模板详情","operationId":"get_template_api_v1_templates__template_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["DocumentTemplates"],"summary":"Update Template","description":"更新模板","operationId":"update_template_api_v1_templates__template_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["DocumentTemplates"],"summary":"Delete Template","description":"删除模板","operationId":"delete_template_api_v1_templates__template_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Template Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/materials":{"get":{"tags":["Materials"],"summary":"List Materials","description":"素材列表","operationId":"list_materials_api_v1_materials_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"query","required":false,"schema":{"type":"string","title":"Category"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Materials"],"summary":"Create Material","description":"创建素材","operationId":"create_material_api_v1_materials_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/materials/{material_id}":{"put":{"tags":["Materials"],"summary":"Update Material","description":"更新素材","operationId":"update_material_api_v1_materials__material_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Material Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MaterialUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Materials"],"summary":"Delete Material","description":"删除素材","operationId":"delete_material_api_v1_materials__material_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"material_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Material Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/collections":{"get":{"tags":["KBCollections","KBFiles"],"summary":"List Kb Collections","description":"知识库集合列表","operationId":"list_kb_collections_api_v1_kb_collections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["KBCollections","KBFiles"],"summary":"Create Kb Collection","description":"创建知识库集合","operationId":"create_kb_collection_api_v1_kb_collections_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KBCollectionCreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/kb/collections/{collection_id}":{"put":{"tags":["KBCollections","KBFiles"],"summary":"Update Kb Collection","description":"更新知识库集合","operationId":"update_kb_collection_api_v1_kb_collections__collection_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KBCollectionUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["KBCollections","KBFiles"],"summary":"Delete Kb Collection","description":"删除知识库集合","operationId":"delete_kb_collection_api_v1_kb_collections__collection_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Collection Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/collections/{collection_id}/files":{"get":{"tags":["KBCollections","KBFiles"],"summary":"List Kb Files","description":"文件列表","operationId":"list_kb_files_api_v1_kb_collections__collection_id__files_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Collection Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","title":"Status"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["KBCollections","KBFiles"],"summary":"Upload Kb Files","description":"上传文件（支持批量）。\n\n流程：保存原始文件 → MarkItDown 转为 Markdown → 保存 MD 文件 → 上传至 Dify。\n支持格式: PDF, DOCX, DOC, TXT, MD, CSV, XLSX, XLS, PPTX, PPT, HTML, JSON, XML","operationId":"upload_kb_files_api_v1_kb_collections__collection_id__files_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"collection_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Collection Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_kb_files_api_v1_kb_collections__collection_id__files_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/files/{file_id}/indexing-status":{"get":{"tags":["KBCollections","KBFiles"],"summary":"Get File Indexing Status","description":"查询文件索引状态。\n\n前端可在上传后轮询此接口，获取最新的 status。\n若文件仍在 indexing 且有 dify_batch_id，还会实时查询 Dify 获取最新状态。","operationId":"get_file_indexing_status_api_v1_kb_files__file_id__indexing_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/files/{file_id}":{"put":{"tags":["KBCollections","KBFiles"],"summary":"Rename Kb File","description":"重命名文件","operationId":"rename_kb_file_api_v1_kb_files__file_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"File Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KBFileRenameRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["KBCollections","KBFiles"],"summary":"Delete Kb File","description":"删除文件","operationId":"delete_kb_file_api_v1_kb_files__file_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/files/batch-export":{"post":{"tags":["KBCollections","KBFiles"],"summary":"Batch Export Kb Files","description":"批量导出知识库文件（ZIP 打包下载）","operationId":"batch_export_kb_files_api_v1_kb_files_batch_export_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KBFileBatchExportRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/kb/files/{file_id}/markdown":{"get":{"tags":["KBCollections","KBFiles"],"summary":"Get Kb File Markdown","description":"获取知识库文件的 Markdown 内容预览","operationId":"get_kb_file_markdown_api_v1_kb_files__file_id__markdown_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/kb/files/{file_id}/reconvert":{"post":{"tags":["KBCollections","KBFiles"],"summary":"Reconvert Kb File To Markdown","description":"重新将知识库文件转换为 Markdown。\n\n适用场景：转换引擎升级后，对旧文件重新生成更高质量的 Markdown。","operationId":"reconvert_kb_file_to_markdown_api_v1_kb_files__file_id__reconvert_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"file_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"File Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/sessions":{"get":{"tags":["ChatSessions","ChatMessages"],"summary":"List Sessions","description":"会话列表","operationId":"list_sessions_api_v1_chat_sessions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["ChatSessions","ChatMessages"],"summary":"Create Session","description":"创建会话","operationId":"create_session_api_v1_chat_sessions_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSessionCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/sessions/{session_id}":{"get":{"tags":["ChatSessions","ChatMessages"],"summary":"Get Session","description":"获取会话详情（含消息）","operationId":"get_session_api_v1_chat_sessions__session_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["ChatSessions","ChatMessages"],"summary":"Update Session","description":"更新会话设置","operationId":"update_session_api_v1_chat_sessions__session_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSessionUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["ChatSessions","ChatMessages"],"summary":"Delete Session","description":"删除会话","operationId":"delete_session_api_v1_chat_sessions__session_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/sessions/{session_id}/messages":{"get":{"tags":["ChatSessions","ChatMessages"],"summary":"List Messages","description":"获取消息列表","operationId":"list_messages_api_v1_chat_sessions__session_id__messages_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}},{"name":"before","in":"query","required":false,"schema":{"type":"string","description":"加载此时间之前的消息","title":"Before"},"description":"加载此时间之前的消息"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/sessions/{session_id}/send":{"post":{"tags":["ChatSessions","ChatMessages"],"summary":"Send Message","description":"发送消息（SSE 流式响应）","operationId":"send_message_api_v1_chat_sessions__session_id__send_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSendRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa-pairs":{"get":{"tags":["QAPairs"],"summary":"List Qa Pairs","description":"QA问答对列表","operationId":"list_qa_pairs_api_v1_qa_pairs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}},{"name":"category","in":"query","required":false,"schema":{"type":"string","title":"Category"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["QAPairs"],"summary":"Create Qa Pair","description":"创建QA问答对","operationId":"create_qa_pair_api_v1_qa_pairs_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QAPairCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/qa-pairs/{pair_id}":{"put":{"tags":["QAPairs"],"summary":"Update Qa Pair","description":"更新QA问答对","operationId":"update_qa_pair_api_v1_qa_pairs__pair_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"pair_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Pair Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QAPairUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["QAPairs"],"summary":"Delete Qa Pair","description":"删除QA问答对","operationId":"delete_qa_pair_api_v1_qa_pairs__pair_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"pair_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Pair Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rules":{"get":{"tags":["SensitiveRules"],"summary":"List Rules","description":"敏感词规则列表","operationId":"list_rules_api_v1_rules_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"action","in":"query","required":false,"schema":{"type":"string","title":"Action"}},{"name":"is_active","in":"query","required":false,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["SensitiveRules"],"summary":"Create Rule","description":"创建敏感词规则","operationId":"create_rule_api_v1_rules_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SensitiveRuleCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rules/{rule_id}":{"put":{"tags":["SensitiveRules"],"summary":"Update Rule","description":"更新敏感词规则","operationId":"update_rule_api_v1_rules__rule_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Rule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SensitiveRuleUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["SensitiveRules"],"summary":"Delete Rule","description":"删除敏感词规则","operationId":"delete_rule_api_v1_rules__rule_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"rule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Rule Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rules/check":{"post":{"tags":["SensitiveRules"],"summary":"Check Text","description":"敏感词检测（登录即可使用）","operationId":"check_text_api_v1_rules_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SensitiveCheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/graph/nodes":{"get":{"tags":["Graph"],"summary":"List Graph Nodes","description":"图谱节点列表","operationId":"list_graph_nodes_api_v1_graph_nodes_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"entity_type","in":"query","required":false,"schema":{"type":"string","title":"Entity Type"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/edges":{"get":{"tags":["Graph"],"summary":"List Graph Edges","description":"图谱边列表","operationId":"list_graph_edges_api_v1_graph_edges_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/graph/subgraph":{"get":{"tags":["Graph"],"summary":"Get Subgraph","description":"获取子图","operationId":"get_subgraph_api_v1_graph_subgraph_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"center_node","in":"query","required":true,"schema":{"type":"string","description":"中心节点名称","title":"Center Node"},"description":"中心节点名称"},{"name":"depth","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":1,"description":"扩展跳数","default":2,"title":"Depth"},"description":"扩展跳数"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/search":{"get":{"tags":["Graph"],"summary":"Search Graph Nodes","description":"搜索图谱节点","operationId":"search_graph_nodes_api_v1_graph_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"搜索关键词","title":"Q"},"description":"搜索关键词"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/graph/extract":{"post":{"tags":["Graph"],"summary":"Extract And Write Graph","description":"调用 Dify 实体抽取 Workflow，将返回的三元组写入知识图谱。\n\n流程：\n1. 调用 dify.extract_entities(text) → list[EntityTriple]\n2. 对每个三元组，upsert 实体节点（按 name + entity_type 去重）\n3. 创建关系边\n4. 返回抽取结果与写入统计","operationId":"extract_and_write_graph_api_v1_graph_extract_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphExtractRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_import_document_api_v1_documents_import_post":{"properties":{"file":{"type":"string","format":"binary","title":"File","description":"支持 PDF/Word/Excel/PPT/TXT/HTML 等格式"},"category":{"type":"string","title":"Category","default":"doc"},"doc_type":{"type":"string","title":"Doc Type","default":"report"},"security":{"type":"string","title":"Security","default":"internal"}},"type":"object","required":["file"],"title":"Body_import_document_api_v1_documents_import_post"},"Body_upload_kb_files_api_v1_kb_collections__collection_id__files_post":{"properties":{"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files"}},"type":"object","required":["files"],"title":"Body_upload_kb_files_api_v1_kb_collections__collection_id__files_post"},"ChatSendRequest":{"properties":{"content":{"type":"string","minLength":1,"title":"Content"},"quote_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Quote Text"}},"type":"object","required":["content"],"title":"ChatSendRequest"},"ChatSessionCreateRequest":{"properties":{"title":{"type":"string","maxLength":255,"title":"Title","default":"新会话"},"kb_collection_ids":{"items":{"type":"string","format":"uuid"},"type":"array","title":"Kb Collection Ids","default":[]},"qa_ref_enabled":{"type":"boolean","title":"Qa Ref Enabled","default":false}},"type":"object","title":"ChatSessionCreateRequest"},"ChatSessionUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Title"},"kb_collection_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Kb Collection Ids"},"qa_ref_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Qa Ref Enabled"}},"type":"object","title":"ChatSessionUpdateRequest"},"DocProcessRequest":{"properties":{"process_type":{"type":"string","title":"Process Type","description":"draft / check / optimize"},"kb_collection_ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Kb Collection Ids"}},"type":"object","required":["process_type"],"title":"DocProcessRequest"},"DocumentCreateRequest":{"properties":{"title":{"type":"string","maxLength":500,"minLength":1,"title":"Title"},"category":{"type":"string","title":"Category","default":"doc"},"doc_type":{"type":"string","title":"Doc Type","default":"report"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"urgency":{"type":"string","title":"Urgency","default":"normal"},"security":{"type":"string","title":"Security","default":"internal"}},"type":"object","required":["title"],"title":"DocumentCreateRequest"},"DocumentExportRequest":{"properties":{"ids":{"anyOf":[{"items":{"type":"string","format":"uuid"},"type":"array"},{"type":"null"}],"title":"Ids"},"format":{"type":"string","title":"Format","description":"csv 或 xlsx","default":"csv"}},"type":"object","title":"DocumentExportRequest","description":"导出公文列表"},"DocumentUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Title"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"doc_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doc Type"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"urgency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Urgency"},"security":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Security"}},"type":"object","title":"DocumentUpdateRequest"},"GraphExtractRequest":{"properties":{"text":{"type":"string","maxLength":50000,"minLength":1,"title":"Text","description":"待抽取文本"},"source_doc_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Source Doc Id","description":"来源文档 ID（可选，用于溯源）"}},"type":"object","required":["text"],"title":"GraphExtractRequest","description":"实体抽取请求"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"KBCollectionCreateRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"parent_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Parent Id"},"description":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Description"}},"type":"object","required":["name"],"title":"KBCollectionCreateRequest"},"KBCollectionUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Description"}},"type":"object","title":"KBCollectionUpdateRequest"},"KBFileBatchExportRequest":{"properties":{"file_ids":{"items":{"type":"string","format":"uuid"},"type":"array","minItems":1,"title":"File Ids","description":"要导出的文件ID列表"}},"type":"object","required":["file_ids"],"title":"KBFileBatchExportRequest"},"KBFileRenameRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"}},"type":"object","required":["name"],"title":"KBFileRenameRequest"},"LoginRequest":{"properties":{"username":{"type":"string","maxLength":50,"minLength":1,"title":"Username"},"password":{"type":"string","maxLength":128,"minLength":1,"title":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequest"},"MaterialCreateRequest":{"properties":{"title":{"type":"string","maxLength":255,"minLength":1,"title":"Title"},"category":{"type":"string","title":"Category","default":"general"},"content":{"type":"string","minLength":1,"title":"Content"}},"type":"object","required":["title","content"],"title":"MaterialCreateRequest"},"MaterialUpdateRequest":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Title"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"}},"type":"object","title":"MaterialUpdateRequest"},"QAPairCreateRequest":{"properties":{"question":{"type":"string","minLength":1,"title":"Question"},"answer":{"type":"string","minLength":1,"title":"Answer"},"category":{"type":"string","title":"Category","default":"通用"},"source_type":{"type":"string","title":"Source Type","default":"manual"},"source_session_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Source Session Id"}},"type":"object","required":["question","answer"],"title":"QAPairCreateRequest"},"QAPairUpdateRequest":{"properties":{"question":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Question"},"answer":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Answer"},"category":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Category"}},"type":"object","title":"QAPairUpdateRequest"},"RoleCreateRequest":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","default":[]}},"type":"object","required":["name"],"title":"RoleCreateRequest"},"RoleUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"permissions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Permissions"}},"type":"object","title":"RoleUpdateRequest"},"SensitiveCheckRequest":{"properties":{"text":{"type":"string","minLength":1,"title":"Text"}},"type":"object","required":["text"],"title":"SensitiveCheckRequest"},"SensitiveRuleCreateRequest":{"properties":{"keyword":{"type":"string","maxLength":255,"minLength":1,"title":"Keyword"},"action":{"type":"string","title":"Action"},"level":{"type":"string","title":"Level","default":"medium"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note"}},"type":"object","required":["keyword","action"],"title":"SensitiveRuleCreateRequest"},"SensitiveRuleUpdateRequest":{"properties":{"keyword":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Keyword"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action"},"level":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Level"},"note":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Note"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"SensitiveRuleUpdateRequest"},"TemplateCreateRequest":{"properties":{"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"template_type":{"type":"string","title":"Template Type","default":"notice"},"content":{"type":"string","minLength":1,"title":"Content"}},"type":"object","required":["name","content"],"title":"TemplateCreateRequest"},"TemplateUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Name"},"template_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template Type"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"TemplateUpdateRequest"},"UserCreateRequest":{"properties":{"username":{"type":"string","maxLength":50,"minLength":2,"title":"Username"},"password":{"type":"string","maxLength":128,"minLength":6,"title":"Password"},"display_name":{"type":"string","maxLength":100,"minLength":1,"title":"Display Name"},"department":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Department"},"role_id":{"type":"string","format":"uuid","title":"Role Id"},"status":{"type":"string","title":"Status","default":"active"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"}},"type":"object","required":["username","password","display_name","role_id"],"title":"UserCreateRequest"},"UserUpdateRequest":{"properties":{"display_name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Display Name"},"department":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Department"},"role_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Role Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Email"},"password":{"anyOf":[{"type":"string","maxLength":128,"minLength":6},{"type":"null"}],"title":"Password"}},"type":"object","title":"UserUpdateRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}